LXI H,8000H
MOV A, M
MOV B, A
INX H
MOV A, M
MOV C, A

MOV D, B
MOV E, C

GCD_LOOP: MOV A, D
CMP E
JZ GCD_DONE
JC GCD_E_GT_D

SUB E
MOV D, A
JMP GCD_LOOP

GCD_E_GT_D: MOV A, E
SUB D
MOV E, A
JMP GCD_LOOP

GCD_DONE: MOV H, D

MOV A, B
MVI L, 00H
MOV B, C

MULT_LOOP: ADD L
MOV L, A
DCR B
JNZ MULT_LOOP

MOV A, L
MOV B, H
MVI C, 00H

DIV_LOOP: CMP B
JC STORE_LCM
SUB B
INR C
JMP DIV_LOOP

STORE_LCM: LXI H,8002H
MOV M, C
HLT
